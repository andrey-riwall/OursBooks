"use strict";document.addEventListener("DOMContentLoaded",(function(){AOS.init();var t=700,e=[],n=0,a=[{id:1,img:"code.jpg",name:"Совершенный код. Мастер-класс",price:100,amount:3,delay:50},{id:2,img:"rapid.jpg",name:"Rapid Development, Steve McConnell",price:180,amount:2,delay:100},{id:3,img:"knut.jpg",name:"Искусство программирования, Д.Кнут",price:210,amount:1,delay:150}];a.forEach((function(t){!function(t){var e=document.getElementById("list"),n=document.createElement("li");n.className="books__item",e.append(n),n.setAttribute("data-id",t.id),n.setAttribute("data-aos","fade-right"),n.setAttribute("data-aos-delay",t.delay);var a=document.createElement("img");a.className="books__img",n.append(a),a.setAttribute("src","img/".concat(t.img));var c=document.createElement("h3");c.className="books__name clamp",n.append(c),c.textContent=t.name;var i=document.createElement("span");i.className="books__price",n.append(i),i.textContent="Цена: ".concat(t.price,"Р");var o=document.createElement("button");o.className="books__btn",o.setAttribute("id","btn"),n.append(o),o.textContent="Купить"}(t)})),s(),document.querySelectorAll("#btn").forEach((function(n){n.addEventListener("click",(function(c){var o=a[n.parentNode.getAttribute("data-id")-1];t-o.price>=0&&o.amount-1>=0?(t-=o.price,o.amount-=1,e.push(o.id),p||(v.classList.add("is_active"),p=!0),s()):o.amount<=0?(i("Товар закончился :("),o.amount=0,n.parentNode.classList.add("saled")):i("У вас не хватает средств :(")}))}));var c=document.getElementById("popup");function i(t){o(c),document.getElementById("message").textContent=t,c.classList.add("is_active")}function o(t){t.classList.remove("is_active")}function s(){var c=document.getElementById("balance"),i=document.getElementById("cart");c.textContent="Баланс: ".concat(t,"Р"),e.length<1?n=0:n+=a[e[e.length-1]-1].price,i.textContent="Вы купили ".concat(e.length," книги на сумму ").concat(n,"Р")}document.getElementById("closePopup").addEventListener("click",(function(){o(c)}));for(var d=document.querySelectorAll(".books__layout"),r=function(t){d[t].onclick=function(){for(var e=0;e<d.length;)d[e++].className="books__layout";d[t].className="books__layout is_active"}},l=0;l<d.length;l++)r(l);document.querySelectorAll(".books__layout").forEach((function(t){t.addEventListener("click",(function(t){var e=t.currentTarget.dataset.path;document.querySelector(".books__list").setAttribute("data-layout",e)}))}));var u=document.getElementById("btnUser"),m=document.getElementById("close"),v=document.querySelector(".books"),p=!1;u.addEventListener("click",(function(){v.classList.toggle("is_active")})),m.addEventListener("click",(function(){v.classList.remove("is_active")})),window.screen.width<461&&(d[0].classList.remove("is_active"),d[1].classList.add("is_active"),list.setAttribute("data-layout","grid")),window.addEventListener("resize",(function(t){var e=document.getElementById("list");t.srcElement.screen.width<1241&&t.srcElement.screen.width>460?(d[0].classList.add("is_active"),d[1].classList.remove("is_active"),e.setAttribute("data-layout","stroke")):t.srcElement.screen.width<461&&(d[0].classList.remove("is_active"),d[1].classList.add("is_active"),e.setAttribute("data-layout","grid"))}))}));